map $upstream_response_time $temprt {
      default $upstream_response_time;
      ""      0;
    }

    log_format json escape=json '{ "@timestamp": "$time_iso8601", '
                   '"remote_addr": "$remote_addr", '
                   '"body_bytes_sent": "$body_bytes_sent", '
                   '"status": $status, '
                   '"request": "$request", '
                   '"url": "$uri", '
                   '"request_method": "$request_method", '
                   '"response_time": $temprt, '
                   '"http_referrer": "$http_referer", '
                   '"http_user_agent": "$http_user_agent" }';

server {
  listen 80;
  listen [::]:80;

  listen 443 ssl http2;
  listen [::]:443 ssl http2;
  ssl_certificate /tmp/camp-php.local.pem;
  ssl_certificate_key /tmp/camp-php.local-key.pem;  

  root /var/www/camp-php.local/html;
  index index.html index.htm index.nginx-debian.html;
  server_name camp-php.local www.camp-php.local;

  location / {
    try_files $uri $uri/ =404;
  }

  location = /hello {
    add_header Content-Type text/plain;
    return 200 $args;
  }

  access_log /var/log/nginx/camp-php.local_access.log json;
}
